define(["exports","thirdparty/babel-runtime/core-js/object/keys","./FontForge","./StatusBarUtils","text!../html/convert-dialog.html","thirdparty/babel-runtime/helpers/interop-require"],function(e,t,n,o,r,a){"use strict";var s=a["default"](r),i="brackets-svg-font.convert",u=brackets.getModule("command/CommandManager"),c=brackets.getModule("widgets/Dialogs"),l=(brackets.getModule("widgets/DefaultDialogs"),brackets.getModule("command/Menus")),d=brackets.getModule("project/ProjectManager"),g={svg:"SVG",ttf:"TrueType",otf:"OpenType",woff:"WOFF"},f=new RegExp("\\.(?:"+t["default"](g).join("|")+")$","i"),m=new RegExp("[^\\/]+"+f.source),h=Mustache.render(s,{fontTypes:t["default"](g).map(function(e){return{id:e,name:g[e]}})}),M=l.getContextMenu(l.ContextMenuIds.PROJECT_MENU),p=u.register("Convert",i,function(){var e=d.getSelectedItem().fullPath,t=c.showModalDialog(i,"Which format do you want to convert the font into?",h,[{className:c.DIALOG_BTN_CLASS_PRIMARY,id:c.DIALOG_BTN_OK,text:"Convert!"},{className:c.DIALOG_BTN_CLASS_NORMAL,id:c.DIALOG_BTN_CANCEL,text:"Cancel"}]);return t.getPromise().then(function(r){if(r===c.DIALOG_BTN_OK){var a=t.getElement().find("select").val(),s=e.replace(/\.[a-z]+$/i,"."+a);return o.showBusyStatus("Converting "+e.match(m)[0]+" into "+s.match(m)[0]),n.convert(e,s).then(function(){return o.hideBusyStatus()})}})});M.addMenuDivider(),M.addMenuItem(p),M.on("beforeContextMenuOpen",function(){var e=d.getSelectedItem();p.setEnabled(e.isFile&&f.test(e.fullPath))})});